<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SQR â€“ Sur Quatre Roues</title>
<link rel="icon" href="logo-sqr.jpg">
<style>
:root{--bg:#0b0f1a;--bg-soft:#12182a;--text:#e9eefc;--muted:#a9b4d0;--brand:#1a5cb5;--accent:#66e5d0;--radius:16px;--shadow:0 8px 24px rgba(0,0,0,.25)}
*{box-sizing:border-box}html{scroll-behavior:smooth}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text)}
a{color:inherit;text-decoration:none}.container{max-width:1200px;margin:0 auto;padding:0 20px}
header{position:sticky;top:0;z-index:100;background:rgba(18,24,42,.9);backdrop-filter:blur(8px);border-bottom:1px solid rgba(255,255,255,.06)}
.nav{display:flex;align-items:center;justify-content:space-between;height:74px;gap:20px}
.brand{display:flex;align-items:center;gap:10px;font-weight:700}.brand img{height:52px;width:auto}
.menu{display:flex;gap:22px;align-items:center}.menu a{opacity:.9}.menu a:hover{opacity:1}.btn{background:var(--brand);color:#fff;padding:10px 14px;border-radius:999px;border:0}
section{padding:40px 0}h1,h2{margin:0 0 10px}.section-sub{color:var(--muted);margin-bottom:16px}
#filters{background:var(--bg-soft);padding:14px;border-radius:var(--radius);box-shadow:var(--shadow);position:sticky;top:82px;z-index:50;margin-bottom:18px}
.filters-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;align-items:end}
.input,.select{display:flex;flex-direction:column;gap:6px}.input input,.select select{background:#0e1322;border:1px solid rgba(255,255,255,.1);color:var(--text);padding:10px 12px;border-radius:12px}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,.18);color:var(--text)}
.chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}.chip{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.14);padding:6px 10px;border-radius:999px;font-size:.85rem;display:flex;gap:6px;align-items:center}
.chip button{background:transparent;border:0;color:var(--text);cursor:pointer;opacity:.8}
.gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:18px}
.card{background:var(--bg-soft);border-radius:18px;padding:14px;box-shadow:var(--shadow);position:relative;overflow:hidden}
.card.hide{display:none}.card img{width:100%;height:180px;object-fit:cover;border-radius:14px;display:block;transition:transform .25s}.card:hover img{transform:scale(1.03)}
.price{color:var(--accent);font-weight:800;margin:8px 0}
.badge{position:absolute;top:12px;left:12px;z-index:3;pointer-events:none}
.badge.coupdecoeur{background:#e53935;color:#fff;display:flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:50%}
.badge.coupdecoeur svg{width:16px;height:16px;fill:#fff}
.badge.rare{background:purple;color:#fff;padding:4px 8px;border-radius:12px;font-size:.75rem;font-weight:700}
.lightbox-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:9999;padding:24px}
.lightbox-backdrop.active{display:flex}.lightbox-content{max-width:92vw;max-height:86vh;position:relative;display:flex;align-items:center;gap:16px}
.lightbox-content img{max-width:80vw;max-height:86vh;border-radius:12px;display:block}.lightbox-nav{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.25);color:#fff;width:46px;height:46px;border-radius:999px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:22px}
.lightbox-close{position:absolute;top:-12px;right:-12px;background:#111;border:1px solid rgba(255,255,255,.2);color:#fff;border-radius:999px;padding:10px 14px;font-weight:700;cursor:pointer}
.build-stamp{position:fixed;right:12px;bottom:12px;background:#1a5cb5;color:#fff;padding:6px 10px;border-radius:10px;z-index:99999;font-size:12px;box-shadow:0 6px 18px rgba(0,0,0,.25)}
</style>
</head>
<body>
<header>
  <div class="container nav">
    <a class="brand" href="#"><img src="logo-sqr.jpg" alt="SQR"> Sur Quatre Roues</a>
    <nav class="menu">
      <a href="#catalogue">Nos vÃ©hicules</a>
      <a href="#services">Nos services</a>
      <a href="#avis">Avis clients</a>
      <a class="btn" href="contact.html">Contact</a>
    </nav>
  </div>
</header>

<main>
  <section id="catalogue" class="container">
    <h2>Nos vÃ©hicules disponibles</h2>
    <p class="section-sub">DÃ©couvrez notre sÃ©lection du moment</p>

    <div id="filters">
      <div class="filters-row">
        <div class="input"><label for="q">Recherche</label><input id="q" type="search" placeholder="modÃ¨le, motorisationâ€¦"></div>
        <div class="select"><label for="fuel">Ã‰nergie</label><select id="fuel"><option value="">Toutes</option><option>Essence</option><option>Diesel</option><option>Hybride</option><option>Ã‰lectrique</option></select></div>
        <div class="select"><label for="year">AnnÃ©e min</label><select id="year"><option value="">Toutes</option><option>2020</option><option>2018</option><option>2016</option><option>2014</option><option>2012</option><option>2010</option><option>2008</option><option>2006</option><option>2004</option><option>2002</option><option>2000</option></select></div>
        <div class="select"><label for="kmmax">Km max</label><select id="kmmax"><option value="">Tous</option><option value="60000">60â€¯000 km</option><option value="90000">90â€¯000 km</option><option value="120000">120â€¯000 km</option><option value="150000">150â€¯000 km</option><option value="200000">200â€¯000 km</option></select></div>
        <div class="select"><label for="price">Prix max</label><select id="price"><option value="">Tous</option><option value="7000">7â€¯000 â‚¬</option><option value="10000">10â€¯000 â‚¬</option><option value="15000">15â€¯000 â‚¬</option><option value="20000">20â€¯000 â‚¬</option></select></div>
        <div class="select"><label for="gear">BoÃ®te</label><select id="gear"><option value="">Toutes</option><option value="manuelle">Manuelle</option><option value="auto">Automatique</option></select></div>
        <div class="select"><label for="sort">Trier</label><select id="sort"><option value="">Pertinence</option><option value="price-asc">Prix â†‘</option><option value="price-desc">Prix â†“</option><option value="year-desc">AnnÃ©e â†“</option><option value="km-asc">KilomÃ©trage â†‘</option></select></div>
        <button id="resetFilters" class="btn ghost">RÃ©initialiser</button>
      </div>
      <div id="activeChips" class="chips"></div>
      <div id="resultsCount" class="muted small"></div>
      <div class="muted small" style="margin-top:6px">ðŸ”§ Filtres v2 activÃ©s (Km max + BoÃ®te)</div>
    </div>

    <div class="gallery">
      <!-- Fiat Punto 1.2 ELX â€” aucun badge -->
      <div class="card" data-title="Fiat Punto 1.2 ELX" data-price="3490" data-year="2000" data-km="151500" data-fuel="Essence" data-gear="manuelle">
        <img src="Fiat Punto 1.2 ELX.jpg" alt="Fiat Punto 1.2 ELX">
        <h3>Fiat Punto 1.2 ELX</h3><p class="price">3â€¯490 â‚¬</p><p>2000 â€¢ 151â€¯500 km â€¢ Essence</p><p class="muted">Garantie 12 mois</p>
      </div>

      <!-- Renault Twingo 2 1.5 DCI â€” coup de coeur -->
      <div class="card" data-title="Renault Twingo 2 1.5 DCI" data-price="6900" data-year="2013" data-km="123400" data-fuel="Diesel" data-gear="manuelle" data-badges="heart">
        <img src="Twingo 2.jpg" alt="Renault Twingo 2 1.5 DCI" data-gallery="Twingo 2.jpg|twingo 2 (2).jpg">
        <h3>Renault Twingo 2 1.5 DCI</h3><p class="price">6â€¯900 â‚¬</p><p>2013 â€¢ 123â€¯400 km â€¢ Diesel</p><p class="muted">Garantie 12 mois</p>
      </div>

      <!-- Renault Twingo 3 â€” coup de coeur -->
      <div class="card" data-title="Renault Twingo 3" data-price="8390" data-year="2018" data-km="76900" data-fuel="Essence" data-gear="manuelle" data-badges="heart">
        <img src="Renault Twingo 3.jpg" alt="Renault Twingo 3">
        <h3>Renault Twingo 3</h3><p class="price">8â€¯390 â‚¬</p><p>2018 â€¢ 76â€¯900 km â€¢ Essence</p><p class="muted">Garantie 12 mois</p>
      </div>

      <!-- Toyota Hilux â€” rare + galerie 3 photos -->
      <div class="card" data-title="Toyota Hilux 2.5 D-4D 120ch" data-price="18900" data-year="2010" data-km="202000" data-fuel="Diesel" data-gear="manuelle" data-badges="rare">
        <img src="Toyota Hilux 2.5 D-4D 120ch.jpg" alt="Toyota Hilux 2.5 D-4D 120ch" data-gallery="Toyota Hilux 2.5 D-4D 120ch.jpg|Toyota Hilux 2.5 D-4D 120ch (1).jpg|Toyota Hilux 2.5 D-4D 120ch (2).jpg">
        <h3>Toyota Hilux 2.5 D-4D 120ch</h3><p class="price">18â€¯900 â‚¬</p><p>2010 â€¢ 202â€¯000 km â€¢ Diesel</p><p class="muted">Garantie 12 mois</p>
      </div>
    </div>
  </section>

  <section id="services" class="container">
    <h2>Nos services</h2>
    <p class="section-sub">Reprise de votre vÃ©hicule â€¢ Garantie & rÃ©vision â€¢ Livraison & immatriculation</p>
  </section>

  <section id="avis" class="container">
    <h2>Avis clients</h2>
    <p class="section-sub">Note moyenne 4.9 â˜…</p>
  </section>
</main>

<!-- Lightbox -->
<div class="lightbox-backdrop" id="lightbox" role="dialog" aria-modal="true" aria-label="Agrandissement image vÃ©hicule">
  <div class="lightbox-content">
    <button class="lightbox-nav" id="lb-prev" aria-label="PrÃ©cÃ©dent">â€¹</button>
    <img id="lb-img" src="" alt="Agrandissement vÃ©hicule">
    <button class="lightbox-nav" id="lb-next" aria-label="Suivant">â€º</button>
    <button class="lightbox-close" id="lb-close" aria-label="Fermer">âœ•</button>
  </div>
</div>

<div class="build-stamp">Build: SQR fix badges + filtres v2 â€¢ 2025-09-12 07:48:24 UTC</div>

<script>
// Inject badges depuis data-badges
(function(){
  const map={'heart':()=>{const s=document.createElement('span');s.className='badge coupdecoeur';s.innerHTML='<svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>';return s;},'rare':()=>{const s=document.createElement('span');s.className='badge rare';s.textContent='Rare';return s;}};
  document.querySelectorAll('.card').forEach(c=>{const b=(c.getAttribute('data-badges')||'').split(',').map(s=>s.trim().toLowerCase()).filter(Boolean);b.forEach(k=>{if(map[k]) c.insertBefore(map[k](),c.firstElementChild);});});
})();

// Filtres
(function(){
  const gallery=document.querySelector('.gallery');const cards=[...gallery.querySelectorAll('.card')];
  const q=document.getElementById('q'),fuel=document.getElementById('fuel'),year=document.getElementById('year'),kmmax=document.getElementById('kmmax'),price=document.getElementById('price'),gear=document.getElementById('gear'),sort=document.getElementById('sort'),chips=document.getElementById('activeChips'),resetBtn=document.getElementById('resetFilters'),resultsCount=document.getElementById('resultsCount');
  function apply(){const qv=(q.value||'').toLowerCase().trim();const fv=fuel.value;const yv=parseInt(year.value||'0',10)||0;const kv=parseInt(kmmax.value||'0',10)||0;const pv=parseInt(price.value||'0',10)||0;const gv=(gear.value||'').toLowerCase();let shown=0;
    cards.forEach(c=>{const matchQ=!qv||(c.dataset.title||'').toLowerCase().includes(qv);const matchFuel=!fv||c.dataset.fuel===fv;const matchYear=!yv||(c.dataset.year|0)>=yv;const matchKm=!kv||(c.dataset.km|0)<=kv;const matchPrice=!pv||(c.dataset.price|0)<=pv;const matchGear=!gv||(c.dataset.gear||'')===gv;const ok=matchQ&&matchFuel&&matchYear&&matchKm&&matchPrice&&matchGear;c.classList.toggle('hide',!ok);if(ok) shown++;});
    const visible=cards.filter(c=>!c.classList.contains('hide'));const cmp={'price-asc':(a,b)=>(a.dataset.price|0)-(b.dataset.price|0),'price-desc':(a,b)=>(b.dataset.price|0)-(a.dataset.price|0),'year-desc':(a,b)=>(b.dataset.year|0)-(a.dataset.year|0),'km-asc':(a,b)=>(a.dataset.km|0)-(b.dataset.km|0)}[sort.value||''];if(cmp) visible.sort(cmp).forEach(el=>gallery.appendChild(el));
    chips.innerHTML='';const defs=[];if(qv) defs.push({k:'q',label:'Recherche: '+q.value});if(fv) defs.push({k:'fuel',label:'Ã‰nergie: '+fv});if(yv) defs.push({k:'year',label:'AnnÃ©e â‰¥ '+yv});if(kv) defs.push({k:'km',label:'Km â‰¤ '+new Intl.NumberFormat('fr-FR').format(kv)+' km'});if(pv) defs.push({k:'price',label:'Prix â‰¤ '+new Intl.NumberFormat('fr-FR').format(pv)+' â‚¬'});if(gv) defs.push({k:'gear',label:'BoÃ®te: '+(gv==='auto'?'Automatique':'Manuelle')});defs.forEach(def=>{const chip=document.createElement('span');chip.className='chip';chip.innerHTML=def.label+' <button>Ã—</button>';chip.querySelector('button').addEventListener('click',()=>{if(def.k==='q') q.value='';if(def.k==='fuel') fuel.value='';if(def.k==='year') year.value='';if(def.k==='km') kmmax.value='';if(def.k==='price') price.value='';if(def.k==='gear') gear.value='';apply();});chips.appendChild(chip);});
    resultsCount.textContent=shown+' vÃ©hicule'+(shown>1?'s':'')+' trouvÃ©'+(shown>1?'s':'');}
  ;[q,fuel,year,kmmax,price,gear,sort].forEach(el=>el&&el.addEventListener('input',apply));resetBtn&&resetBtn.addEventListener('click',()=>{q.value='';fuel.value='';year.value='';kmmax.value='';price.value='';gear.value='';sort.value='';apply();});apply();})();

// Lightbox
(function(){
  const lb=document.getElementById('lightbox'),img=document.getElementById('lb-img'),prev=document.getElementById('lb-prev'),next=document.getElementById('lb-next'),closeBtn=document.getElementById('lb-close');let gal=[],idx=0;
  function open(arr,start){gal=(arr||[]).filter(Boolean);idx=Math.max(0,Math.min(start||0,gal.length-1));if(!gal.length) return;img.src=gal[idx];lb.classList.add('active');document.body.style.overflow='hidden';}
  function nav(d){if(!gal.length) return;idx=(idx+d+gal.length)%gal.length;img.src=gal[idx];}
  document.addEventListener('click',e=>{const im=e.target.closest('.card img');if(!im) return;const g=(im.getAttribute('data-gallery')||'');const arr=g?g.split('|'):[im.currentSrc||im.src];const start=Math.max(0,arr.indexOf(im.getAttribute('src')));open(arr,start);});
  prev.addEventListener('click',()=>nav(-1));next.addEventListener('click',()=>nav(1));
  function closeLB(){lb.classList.remove('active');img.src='';document.body.style.overflow='';gal=[];}
  closeBtn.addEventListener('click',closeLB);lb.addEventListener('click',e=>{if(e.target===lb) closeLB();});
  document.addEventListener('keydown',e=>{if(!lb.classList.contains('active')) return;if(e.key==='Escape') closeLB();if(e.key==='ArrowLeft') nav(-1);if(e.key==='ArrowRight') nav(1);});
})();
</script>
</body>
</html>
